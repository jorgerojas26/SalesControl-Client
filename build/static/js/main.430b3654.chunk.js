(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{22:function(e,t){e.exports={loadProducts:function(e){return{type:"LOAD_PRODUCTS",paginatedProducts:e}},setLoading:function(e){return{type:"LOADING",loading:e}}}},23:function(e,t){e.exports={loadCategories:function(e){return{type:"LOAD_CATEGORIES",categories:e}},setActiveCategoryId:function(e){return{type:"SET_ACTIVE_CATEGORY_ID",categoryId:e}},setActiveCategoryName:function(e){return{type:"SET_ACTIVE_CATEGORY_NAME",categoryName:e}}}},54:function(e,t,a){e.exports=a(99)},59:function(e,t,a){},60:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),s=a.n(c),l=(a(59),a(60),a(10)),o=a(8),i=a(2),d=a(3),m=a(1),u=a(5),p=a(4),h=a(47),f=a.n(h),b=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return this.props.noResults?r.a.createElement("ul",{className:"list-group position-absolute w-100"},r.a.createElement("li",{className:"list-group-item text-justify"},"No se encontraron resultados")):r.a.createElement("ul",{className:"list-group position-absolute w-100 suggestionsBox"},this.props.suggestions.map((function(t){return e.props.onlyName?r.a.createElement("div",{onClick:e.props.clickHandler,key:t.id,productid:t.id,className:"text-justify"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-1"},r.a.createElement("img",{style:{maxWidth:"35px"},src:t.imagePath,alt:"IMG"})),r.a.createElement("div",{className:"col-6 float-left"},r.a.createElement("h5",{className:"font-weight-bold",id:"productName"},t.name))))):r.a.createElement("li",{onClick:e.props.clickHandler,key:t.id,className:"list-group-item text-justify"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-sm-6 col-md-12 col-lg-12 col-xl-6"},r.a.createElement("img",{className:"",style:{maxWidth:"35px"},src:t.imagePath,alt:"IMG"}),r.a.createElement("span",{id:"productName font-weight-bold"},t.name)),r.a.createElement("div",{className:"col-6 col-sm-4 col-md-6 col-lg-6 col-xl-4"},r.a.createElement("div",{className:"input-group "},r.a.createElement("input",{className:"form-control text-center",style:{minWidth:"45px",maxWidth:"70px"},type:"number",defaultValue:"1",name:"numberOfItems",id:"numberOfItems"}),r.a.createElement("input",{className:"bg-dark text-light",type:"button",value:"Comprar"}))),r.a.createElement("div",{className:"col-6 col-sm-2 col-md-6 col-lg-6 col-xl-2 "},r.a.createElement("span",{className:"text-danger"},"".concat(t.price," Bs.")))))})))}}]),a}(n.Component),g=a(33),E=a.n(g),v=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={showSuggestions:!1,suggestions:[],noResults:!1},e.searchHandler=E()(e.searchHandler,500),e.headerContainer=r.a.createRef(),e.onBlurHandler=e.onBlurHandler.bind(Object(m.a)(e)),e}return Object(d.a)(a,[{key:"searchHandler",value:function(e){var t=this;e.target.value.length>0?fetch("/api/products?name=".concat(e.target.value,"&page=1&limit=10")).then((function(e){return e.json()})).then((function(e){e.data.length>0?t.setState({showSuggestions:!0,suggestions:e.data,noResults:!1}):t.setState({showSuggestions:!0,noResults:!0})})):this.setState({showSuggestions:!1,suggestions:[]})}},{key:"onBlurHandler",value:function(){this.setState({showSuggestions:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.props.parentClassName},r.a.createElement("input",{onChange:function(t){t.persist(),e.searchHandler(t)},className:this.props.className,type:"text",placeholder:"Buscar Producto",id:"searchInput"}),r.a.createElement("div",{ref:this.suggestionBox,className:""},this.state.showSuggestions&&r.a.createElement(f.a,{onOutsideClick:this.onBlurHandler},r.a.createElement(b,{suggestions:this.state.suggestions,noResults:this.state.noResults,clickHandler:this.props.clickHandler,onlyName:this.props.onlyName}))))}}]),a}(n.Component),y=(n.Component,n.Component,a(21)),N=a(22),D=a(23),S=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).fetchProducts=e.fetchProducts.bind(Object(m.a)(e)),e.categoryHandler=e.categoryHandler.bind(Object(m.a)(e)),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/categories").then((function(e){return e.json()})).then((function(t){t.data.length>0&&(e.props.dispatch(D.loadCategories(t.data)),e.props.dispatch(D.setActiveCategoryId(document.querySelector(".categoryItem, active").getAttribute("categoryId"))),e.props.dispatch(D.setActiveCategoryName(document.querySelector(".categoryItem, active").innerText)))}))}},{key:"categoryHandler",value:function(e){e.preventDefault(),e.target.className.includes("active")||(e.target.parentElement.querySelector(".active").classList.remove("active"),e.target.classList.add("active"),this.props.dispatch(D.setActiveCategoryId(e.target.getAttribute("categoryid"))),this.props.dispatch(D.setActiveCategoryName(e.target.innerText)),this.fetchProducts(1,16,e.target.getAttribute("categoryid")))}},{key:"fetchProducts",value:function(e,t,a){var n=this;this.props.dispatch(N.setLoading(!0)),fetch("/api/products?page=".concat(e,"&limit=").concat(t,"&categories=").concat(a)).then((function(e){return e.json()})).then((function(e){n.props.dispatch(N.loadProducts(e)),n.props.dispatch(N.setLoading(!1))}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-xs-6 col-sm-12 col-md-12 p-0 mt-0 mt-md-5 productcategoriesContainer"},r.a.createElement("div",{className:"card rounded-0"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h5",{className:"card-title text-danger font-weight-bold"},"Categorias")),r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("div",{className:"list-group"},this.props.categories?this.props.categories.map((function(t,a){return 0===a?r.a.createElement("li",{onClick:e.categoryHandler,categoryid:t.id,key:t.id,className:"categoryItem list-group-item active btn"},t.name):r.a.createElement("li",{onClick:e.categoryHandler,categoryid:t.id,key:t.id,className:"categoryItem list-group-item btn"},t.name)})):r.a.createElement("span",null,"No hay categorias")))))}}]),a}(n.Component);Object(y.b)((function(e,t){return{categories:e.categories.data,activeCategory:e.categories.activeCategory}}))(S);var C=a(49),k=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("h3",{className:"float-left text-danger mt-2"},this.props.activeCategory)}}]),a}(n.Component);var j=Object(y.b)((function(e,t){return{activeCategory:e.categories.activeCategoryName}}))(k),O=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).observer=new IntersectionObserver(e.loadMoreProductsHandler.bind(Object(m.a)(e))),e.elementToObserve=r.a.createRef(),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.fetchProducts(1,16)}},{key:"componentDidUpdate",value:function(){this.elementToObserve.current&&this.observer.observe(this.elementToObserve.current)}},{key:"fetchProducts",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.props.dispatch(N.setLoading(!0)),fetch("/api/products?page=".concat(e,"&limit=").concat(t,"&categories=").concat(n)).then((function(e){return e.json()})).then((function(e){e.data=a.props.products.concat(e.data),a.props.dispatch(N.loadProducts(e)),a.props.dispatch(N.setLoading(!1))}))}},{key:"loadMoreProductsHandler",value:function(e){e[0].isIntersecting&&this.props.next&&this.fetchProducts(this.props.next.page,this.props.next.limit,this.props.activeCategory)}},{key:"render",value:function(){if(this.props.products.length>0){var e=this.props.products.map((function(e,t){return r.a.createElement("div",{className:"col-6 col-sm-6 col-md-4 col-lg-3 p-0 pr-2 pb-2",key:t},r.a.createElement("div",{className:"card"},r.a.createElement("img",{className:"card-img-top productImage",src:e.imagePath,alt:"Imagen del producto"}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title font-weight-bold overflow-hidden text-truncate text-dark"},e.name),r.a.createElement("h5",{className:"text-danger"},"Bs. ",e.price)),r.a.createElement("div",{className:"card-footer"},r.a.createElement("div",{className:"input-group d-flex justify-content-center"},r.a.createElement("input",{className:"form-control text-center",style:{maxWidth:"35%"},type:"number",defaultValue:"1",name:"numberOfItems",id:"numberOfItems"}),r.a.createElement("input",{className:"bg-dark text-light",type:"button",value:"Comprar"})))))}));return this.props.next&&e.push(r.a.createElement("div",{className:"col-xs-12 col-sm-6 col-md-4 col-lg-3 p-0 pr-2 pb-2",key:"contentLoader",ref:this.elementToObserve},r.a.createElement(C.a,{speed:1,viewBox:"0 0 200 400",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb"},r.a.createElement("rect",{x:"0",y:"6",rx:"0",ry:"0",width:"239",height:"250"}),r.a.createElement("rect",{x:"0",y:"292",rx:"0",ry:"0",width:"239",height:"15"}),r.a.createElement("rect",{x:"59",y:"291",rx:"0",ry:"0",width:"2",height:"0"}),r.a.createElement("rect",{x:"0",y:"313",rx:"0",ry:"0",width:"239",height:"15"}),r.a.createElement("rect",{x:"0",y:"361",rx:"0",ry:"0",width:"239",height:"36"})))),e.unshift(r.a.createElement("div",{className:"col-12"},r.a.createElement(j,null))),e}return this.props.loading?r.a.createElement("p",null,"Loading"):r.a.createElement("p",null,"No hay productos")}}]),a}(n.Component);Object(y.b)((function(e,t){return{products:e.products.data,next:e.products.next,previous:e.products.previous,loading:e.products.loading,activeCategory:e.categories.activeCategory}}))(O),n.Component;var w=a(12),x=a(28),H=a.n(x),R=a(50);function I(){return(I=Object(R.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("jwt")){e.next=3;break}return e.abrupt("return",!1);case 3:return e.abrupt("return",fetch("/sessions/isAuthenticated?token=".concat(t)).then((function(e){return e.json()})).then((function(e){return e.auth})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(){return I.apply(this,arguments)},M=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).onSubmitHandler=e.onSubmitHandler.bind(Object(m.a)(e)),e.inputHandler=e.inputHandler.bind(Object(m.a)(e)),e.state={email:null,password:null,logginError:null},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;T().then((function(t){t&&e.props.history.push("/")}))}},{key:"onSubmitHandler",value:function(e){var t=this;e.preventDefault(),this.setState({logginError:null}),fetch("/sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.state.email,password:this.state.password})}).then((function(e){return e.json()})).then((function(e){e.err?t.setState({logginError:e.err}):(localStorage.setItem("jwt",e.token),t.props.history.push("/"))}))}},{key:"inputHandler",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container h-100 col-10 col-md-4"},r.a.createElement("div",{className:"row h-100 justify-content-center align-items-center"},r.a.createElement("form",{onSubmit:this.onSubmitHandler,className:"col-12",action:"/sessions",method:"POST"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:this.inputHandler,type:"text",className:"form-control",name:"email",id:"email",placeholder:"Email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:this.inputHandler,type:"password",className:"form-control",name:"password",id:"password",placeholder:"Password"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Enviar")),r.a.createElement("div",{className:"form-group"},r.a.createElement("p",{className:"text-danger"},this.state.logginError)))))}}]),a}(n.Component),Y=a(7),F=(a(16),a(84));a(91),a(92),a(93),a(94),a(95),window.JSZip=F;var P=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this)).recordsTable=r.a.createRef(),n.modal=r.a.createRef(),n.state={selectedRowData:null,sourceURL:e.sourceURL},n}return Object(d.a)(a,[{key:"changeSourceURL",value:function(e){var t=this.recordsTable.current;Y(t).DataTable().ajax.url(e).load()}},{key:"componentDidMount",value:function(){var e=this,t=this.recordsTable.current,a=Y(t),n=this;this.props.asyncTable?(a=a.DataTable({initComplete:function(){this.api().columns().every((function(){var e=this;"createdAt"==e.dataSrc()||"updatedAt"==e.dataSrc()?Y(this.header()).append("<br><input class='p-0 m-0 h-100' type='date' />"):Y(this.header()).append("<br><input class='p-0 m-0 h-100' type='text' placeholder='Filtrar'/>"),Y("input",this.header()).on("keyup change",(function(){var t=e.dataSrc().split("."),r="";t.forEach((function(e,a){0==a?r=t[0]:r+=t[a].charAt(0).toUpperCase()+t[a].slice(1)})),a.ajax.url("".concat(n.state.sourceURL,"?").concat(r,"=").concat(this.value.trim())).load()}))}))},footerCallback:function(e,t){var a=this.api();a.columns().every((function(){if("grossTotalDollars"==this.dataSrc()){var e=a.column(5).data().reduce((function(e,t){return e+t}),0),t=a.column(5,{page:"current"}).data().reduce((function(e,t){return e+t}),0);e?Y(this.footer()).html("".concat(Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),' <br>\n                                            <span class="text-danger">(').concat(Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)," Total)</span>")):Y(this.footer()).html("")}if("grossTotalBs"==this.dataSrc()){var n=a.column(6).data().reduce((function(e,t){return e+t}),0),r=a.column(6,{page:"current"}).data().reduce((function(e,t){return e+t}),0);r?Y(this.footer()).html("".concat(Intl.NumberFormat("es-VE",{style:"currency",currency:"VES"}).format(r),' <br>\n                                        <span class="text-danger">(').concat(Intl.NumberFormat("es-VE",{style:"currency",currency:"VES"}).format(n)," Total)</span>")):Y(this.footer()).html("")}if("netIncomeDollars"==this.dataSrc()){var c=a.column(7).data().reduce((function(e,t){return e+t}),0),s=a.column(7,{page:"current"}).data().reduce((function(e,t){return e+t}),0);s?Y(this.footer()).html("".concat(Intl.NumberFormat("es-VE",{style:"currency",currency:"VES"}).format(s),' <br>\n                                        <span class="text-danger">(').concat(Intl.NumberFormat("es-VE",{style:"currency",currency:"VES"}).format(c)," Total)</span>")):Y(this.footer()).html("")}if("netIncomeBs"==this.dataSrc()){var l=a.column(8).data().reduce((function(e,t){return e+t}),0),o=a.column(8,{page:"current"}).data().reduce((function(e,t){return e+t}),0);o?Y(this.footer()).html("".concat(Intl.NumberFormat("es-VE",{style:"currency",currency:"VES"}).format(o),' <br>\n                                        <span class="text-danger">(').concat(Intl.NumberFormat("es-VE",{style:"currency",currency:"VES"}).format(l)," Total)</span>")):Y(this.footer()).html("")}}))},dom:"Brtip",select:"single",buttons:[{text:"Imprimir",name:"imprimir",className:"btn btn-secondary float-right",extend:"print",messageTop:"Reporte",footer:!0,exportOptions:{modifier:{page:"all"}}}].concat(this.props.actions.map((function(e){return"add"==e?{text:"Add",name:"add",className:"btn btn-success",attr:{"data-toggle":"modal","data-target":"#exampleModal"},action:function(){n.props.setModalAction("add")}}:"edit"==e?{text:"Edit",name:"edit",className:"btn btn-secondary",extend:"selected",attr:{"data-toggle":"modal","data-target":"#exampleModal"},action:function(e,t,a,r){var c=t.row({selected:!0}).data();n.props.setSelectedRowData(c),n.props.setModalAction("edit")}}:"delete"==e?{text:"Delete",name:"delete",className:"btn btn-danger",extend:"selected",action:function(e,t,a,r){var c=t.row({selected:!0}).data();fetch("".concat(n.props.sourceURL,"/").concat(c.id),{method:"DELETE",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){console.log(e),204==e.status?t.ajax.reload():e.json().then((function(e){n.setState({error:e})}))})).catch((function(e){n.setState({error:e})}))}}:"date-range"==e?{text:"Reload",name:"reload",className:"btn btn-primary",action:function(e,t,a,r){t.ajax.url(n.state.sourceURL).load()}}:"discount"==e?[{text:"Apply Discount",name:"discountButton",className:"btn btn-primary",attr:{"data-toggle":"modal","data-target":"#discountModal"},extend:"selected",action:function(e,t,a,r){var c=t.row({selected:!0}).data();n.props.setSelectedRowData(c),n.props.setModalAction("applyDiscount")}},{text:"Cancel Discount",name:"cancelDiscountButton",className:"btn btn-danger",extend:"selected",action:function(e,t,a,n){if(1==window.confirm("\xbfSeguro que desea eliminar el descuento?")){var r=t.row({selected:!0}).data().discount[0].id;fetch("/api/discounts/".concat(r),{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")},method:"DELETE"}).then((function(e){204==e.status&&t.ajax.reload()}))}}}]:void 0}))),ajax:{url:this.state.sourceURL,dataSrc:function(e){return"object"==typeof e.count&&e.data.forEach((function(t,a){t.productId==e.count[a].id&&(t.count=e.count[a].count)})),n.props.sourceURL.includes("/api/sales")&&n.props.sourceURL.includes("group=true")?e.data.forEach((function(t,a){t.product=t.product[0],t.transactions=e.count[a].count,t.grossTotalBs=t.grossTotalDollars*t.dolarReference,t.netIncomeDollars=t.grossTotalDollars*(t.product.profitPercent/100),t.netIncomeBs=t.netIncomeDollars*t.dolarReference})):n.props.sourceURL.includes("/api/supplyings")&&e.data.forEach((function(e){e.transactions=e.count,e.grossTotalBs=e.grossTotalDollars*e.dolarReference})),e.data},headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))},data:function(e){e.page=e.start/e.length+1,e.limit=e.length},error:function(e,t,a){}},paging:!0,pageLength:10,columns:this.props.columns,ordering:!1}),this.props.actions.includes("date-range")&&(Y(".dt-buttons").append('<div class="d-flex justify-content-end">\n                    <label class="mr-2" for="dateFrom">From:</label>\n                    <input type="date" id="dateFrom" name="dateFrom">\n                    <label class="mr-2 ml-2" for="dateTo">To:</label>\n                    <input type="date" id="dateTo" name="dateTo">\n                    </div>'),Y(".dt-buttons input[type=date]").on("change",(function(){a.ajax.url("".concat(n.state.sourceURL,"?from=").concat(Y("#dateFrom").val(),"&to=").concat(Y("#dateTo").val())).load()}))),Y("#resourceTable tbody").on("click","td.details-control",(function(){var e=Y(this).closest("tr"),t=a.row(e);t.child.isShown()?(t.child.hide(),e.removeClass("shown")):(console.log(n.props.childFormat(t.data())),t.child(n.props.childFormat(t.data())).show(),e.addClass("shown"))}))):a=a.DataTable({dom:"",data:this.props.data,columns:this.props.columns}),this.modal.current.addEventListener("focus",(function(){e.modal.current.querySelector(".form-group").children[0].focus()}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"bg-light table-responsive"},r.a.createElement("table",{id:"resourceTable",className:"table table-bordered",ref:this.recordsTable},r.a.createElement("thead",null),r.a.createElement("tbody",null),r.a.createElement("tfoot",null,r.a.createElement("tr",null,this.props.columns.map((function(e,t){return r.a.createElement("td",{key:t})}))))),this.state.error&&r.a.createElement("span",{className:"text-danger"},this.state.error),r.a.createElement("div",{ref:this.modal,className:"modal",id:"exampleModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},r.a.createElement("div",{className:"modal-content"},this.props.modalStructure))))}}]),a}(n.Component),A=a(9),B=a.n(A),q=a(7),L=(a(16),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={submitSuccess:null,submitError:null,selectedRowData:null,modalAction:null},e.submitHandler=e.submitHandler.bind(Object(m.a)(e)),e.setSelectedRowData=e.setSelectedRowData.bind(Object(m.a)(e)),e.editCategoryHandler=e.editCategoryHandler.bind(Object(m.a)(e)),e.setModalAction=e.setModalAction.bind(Object(m.a)(e)),e.categoryName=r.a.createRef(),e}return Object(d.a)(a,[{key:"submitHandler",value:function(e){var t=this;e.preventDefault(),fetch("add"==this.state.modalAction?"/api/categories":"/api/categories/".concat(this.state.selectedRowData.id),{method:"add"==this.state.modalAction?"POST":"PUT",headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"application/json"},body:JSON.stringify({name:this.categoryName.current.value})}).then((function(e){return e.json()})).then((function(e){e.error||e.err?t.setState({submitError:e.error||e.err}):(t.setState({submitSuccess:"Se ha registrado con \xe9xito"}),q("#resourceTable").DataTable().draw())}))}},{key:"editCategoryHandler",value:function(){console.log("hola")}},{key:"setSelectedRowData",value:function(e){this.setState({selectedRowData:e},(function(){q("#name").val(this.state.selectedRowData.name)}))}},{key:"setModalAction",value:function(e){this.setState({modalAction:e})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h1",{className:"text-danger float-left"},"Categor\xedas"))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(P,{asyncTable:!0,setModalAction:this.setModalAction,setSelectedRowData:this.setSelectedRowData,sourceURL:"/api/categories",columns:[{title:"ID",data:"id"},{title:"Nombre",data:"name"},{render:function(e,t,a,n){return B.a.utc(a.createdAt).format("DD/MM/YYYY")},title:"Fecha creaci\xf3n",data:"createdAt",type:"date"},{render:function(e,t,a,n){return B.a.utc(a.updatedAt).format("DD/MM/YYYY")},title:"Fecha actualizaci\xf3n",data:"updatedAt",type:"date"}],actions:["add","edit"],modalStructure:r.a.createElement("form",{onSubmit:this.submitHandler,className:"float-left"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"New Category"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Category Name: "),r.a.createElement("input",{ref:this.categoryName,className:"form-control",type:"text",name:"name",id:"name",required:!0}))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Cerrar"),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Enviar")),this.state.submitError&&r.a.createElement("span",{className:"text-danger"},this.state.submitError),this.state.submitSuccess&&r.a.createElement("span",{className:"text-success"},this.state.submitSuccess))}))))}}]),a}(n.Component)),V=a(7),U=a.n(V),z=a(9),G=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).submitHandler=e.submitHandler.bind(Object(m.a)(e)),e.setSelectedRowData=e.setSelectedRowData.bind(Object(m.a)(e)),e.setModalAction=e.setModalAction.bind(Object(m.a)(e)),e}return Object(d.a)(a,[{key:"setSelectedRowData",value:function(e){this.setState({selectedRowData:e},(function(){U()("#name").val(this.state.selectedRowData.name)}))}},{key:"setModalAction",value:function(e){this.setState({modalAction:e})}},{key:"submitHandler",value:function(e){e.preventDefault()}},{key:"render",value:function(){return r.a.createElement("div",{className:""},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h1",{className:"text-danger float-left"},"Clientes"))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(P,{asyncTable:!0,setSelectedRowData:this.setSelectedRowData,setModalAction:this.setModalAction,sourceURL:"/api/clients",columns:[{title:"ID",data:"id"},{title:"Nombre",data:"name"},{title:"C\xe9dula",data:"cedula"},{render:function(e,t,a,n){return z.utc(a.createdAt).format("DD/MM/YYYY")},title:"Fecha creaci\xf3n",data:"createdAt",type:"date"},{render:function(e,t,a,n){return z.utc(a.updatedAt).format("DD/MM/YYYY")},title:"Fecha actualizaci\xf3n",data:"updatedAt",type:"date"}],actions:["add","edit","delete"],modalStructure:r.a.createElement("form",{onSubmit:this.submitHandler,className:"float-left"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"New Client"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Client Name: "),r.a.createElement("input",{className:"form-control",type:"text",name:"name",id:"name",autoFocus:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"cedula"},"C\xe9dula: "),r.a.createElement("input",{className:"form-control",type:"text",name:"cedula",id:"cedula",autoFocus:!0}))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Cerrar"),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Enviar")))}))))}}]),a}(n.Component),_=a(52),$=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={options:[]},e.searchHandler=e.searchHandler.bind(Object(m.a)(e)),e}return Object(d.a)(a,[{key:"roundToNiceNumber",value:function(e){var t=0;return 4==e.toString().length?t=100*Math.ceil(e/100):e.toString().length>4&&(t=1e3*Math.ceil(e/1e3)),t}},{key:"searchHandler",value:function(e,t){var a=this;fetch(this.props.sourceURL||"/api/products?name=".concat(e)).then((function(e){return e.json()})).then((function(e){e.data.length>0&&(e.data.forEach((function(e){e.value=e.name,e.imagePath?e.label=[r.a.createElement("img",{className:"float-left",style:{maxWidth:"20px"},src:e.imagePath}),"".concat(e.name," (").concat(a.roundToNiceNumber(e.price*a.props.dolarReference),")")]:e.label="".concat(e.name," (").concat(Intl.NumberFormat("es-VE",{style:"currency",currency:"VES"}).format(a.roundToNiceNumber(e.price*a.props.dolarReference)),")")})),t(e.data))}))}},{key:"render",value:function(){return r.a.createElement(_.a,{loadOptions:this.searchHandler,defaultOptions:!0,placeholder:"Buscar",autoFocus:!0,inputId:"selectedProduct",isMulti:this.props.isMulti,isClearable:!0,ref:this.props.innerRef,name:this.props.name,onChange:this.props.changeHandler,value:this.props.value})}}]),a}(n.Component),W=(a(16),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={selectedCategories:null,name:"",productImageFile:"",profitPercent:"",success:"",error:"",modalAction:null,discountPercent:null,discountStartDate:null,discountEndDate:null,selectedRowData:null},e.submitHandler=e.submitHandler.bind(Object(m.a)(e)),e.discountSubmitHandler=e.discountSubmitHandler.bind(Object(m.a)(e)),e.optionChangeHandler=e.optionChangeHandler.bind(Object(m.a)(e)),e.changeHandler=e.changeHandler.bind(Object(m.a)(e)),e.setModalAction=e.setModalAction.bind(Object(m.a)(e)),e.setSelectedRowData=e.setSelectedRowData.bind(Object(m.a)(e)),e.CustomSelectRef=r.a.createRef(),e.productForm=r.a.createRef(),e.closeButton=r.a.createRef(),e}return Object(d.a)(a,[{key:"setModalAction",value:function(e){this.setState({modalAction:e})}},{key:"setSelectedRowData",value:function(e){var t=this,a=[];e.category.forEach((function(e){a.push({id:e.id,label:e.name,value:e.name})})),this.setState({selectedRowData:e,selectedCategories:a,name:e.name,profitPercent:e.profitPercent},(function(){U()("#name").val(t.state.selectedRowData.name),U()("#profitPercent").val(t.state.selectedRowData.profitPercent)}))}},{key:"optionChangeHandler",value:function(e,t){this.setState({selectedCategories:e})}},{key:"changeHandler",value:function(e){this.setState(Object(w.a)({},e.target.name,"file"==e.target.type?e.target.files[0]:e.target.value))}},{key:"submitHandler",value:function(e){var t=this;e.preventDefault();var a="";this.state.selectedCategories?this.state.selectedCategories.forEach((function(e,n){a+=e.id,n!=t.state.selectedCategories.length-1&&(a+=",")})):alert("Seleccione las categor\xedas");var n=new FormData;n.append("productImageFile",this.state.productImageFile),n.append("name",this.state.name),n.append("profitPercent",this.state.profitPercent),n.append("categories",a),fetch("add"==this.state.modalAction?"/api/products":"/api/products/".concat(this.state.selectedRowData.id),{method:"add"==this.state.modalAction?"POST":"PATCH",headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),Accept:"application/json"},body:n}).then((function(e){200==e.status?(t.setState({success:"El producto se ha registrado con exito"}),t.productForm.current.reset(),t.closeButton.current.click(),U()("#resourceTable").DataTable().ajax.reload()):409==e.status&&e.json().then((function(e){t.setState({error:e.error||e.err})}))})).catch((function(e){t.setState({error:e})}))}},{key:"discountSubmitHandler",value:function(e){var t=this;e.preventDefault(),this.state.discountPercent&&this.state.discountStartDate&&this.state.discountEndDate?fetch("/api/discounts",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"application/json"},body:JSON.stringify({productId:this.state.selectedRowData.id,percent:this.state.discountPercent,startDate:this.state.discountStartDate,endDate:this.state.discountEndDate})}).then((function(e){200==e.status?t.setState({success:"Se ha registrado con \xe9xito"}):e.json().then((function(e){t.setState({error:e.error||e.err})}))})):alert("Rellene todos los campos")}},{key:"roundToNiceNumber",value:function(e){var t=0;return 4==e.toString().length?t=100*Math.ceil(e/100):e.toString().length>4&&(t=1e3*Math.ceil(e/1e3)),t}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:""},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h1",{className:"text-danger float-left"},"Productos"))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(P,{asyncTable:!0,setSelectedRowData:this.setSelectedRowData,setModalAction:this.setModalAction,sourceURL:"/api/products",columns:[{render:function(e,t,a,n){return a.imagePath?'<img src="'.concat(a.imagePath,'" style="max-width:35px;"/>'):""},title:"Imagen"},{title:"ID",data:"id"},{title:"Nombre",data:"name"},{title:"Precio $",data:"price"},{render:function(t){return Intl.NumberFormat("es-Ve",{style:"currency",currency:"VES"}).format(e.roundToNiceNumber(t*e.props.dolarReference))},title:"Precio Bs",data:"price"},{render:function(e){return e+"%"},title:"Porcentaje de Ganancia",data:"profitPercent"},{render:function(e,t,a,n){var r=e.map((function(e){return e.percent}));return r.length?r+"%":"0%"},title:"Descuento",data:"discount"},{title:"Descuento desde",data:"discount[0].startDate"},{title:"Descuento hasta",data:"discount[0].endDate"},{render:function(e,t,a,n){return B.a.utc(a.createdAt).format("DD/MM/YYYY")},title:"Fecha creaci\xf3n",data:"createdAt",type:"date"},{render:function(e,t,a,n){return B.a.utc(a.updatedAt).format("DD/MM/YYYY")},title:"Fecha actualizaci\xf3n",data:"updatedAt",type:"date"}],actions:["add","edit","delete","discount"],modalStructure:r.a.createElement("form",{ref:this.productForm,onSubmit:this.submitHandler,className:"float-left"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"New Product"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Product Name: "),r.a.createElement("input",{onChange:this.changeHandler,className:"form-control",type:"text",name:"name",id:"name",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"profitPercent"},"Profit Percent: "),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},"%")),r.a.createElement("input",{onChange:this.changeHandler,className:"form-control",type:"number",step:"0.1",name:"profitPercent",id:"profitPercent",required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"productImageFile"},"Imagen: "),r.a.createElement("div",{className:"custom-file"},r.a.createElement("input",{onChange:this.changeHandler,type:"file",className:"custom-file-input",id:"productImageFile",name:"productImageFile"}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"image"},"Choose file"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"price"},"Categor\xedas: "),r.a.createElement($,{sourceURL:"/api/categories",isMulti:!0,innerRef:this.CustomSelectRef,changeHandler:this.optionChangeHandler,value:this.state.selectedCategories,required:!0}))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{ref:this.closeButton,type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Cerrar"),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Enviar")),this.state.success&&r.a.createElement("span",{className:"text-success"},this.state.success),this.state.error&&r.a.createElement("span",{className:"text-danger"},this.state.error))}),r.a.createElement("div",{id:"discountModal",className:"modal",tabIndex:"-1"},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"}),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("form",{onSubmit:this.discountSubmitHandler},r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"discountPercent"},"Discount Percent: "),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{onChange:this.changeHandler,className:"form-control",type:"number",step:"0.01",min:"0",name:"discountPercent",id:"discountPercent",required:!0}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},"%"))),r.a.createElement("label",{htmlFor:"discountStartDate"},"Start Date:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{onChange:this.changeHandler,className:"form-control",type:"date",name:"discountStartDate",id:"discountStartDate",required:!0})),r.a.createElement("label",{htmlFor:"discountEndDate"},"End Date:"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{onChange:this.changeHandler,className:"form-control",type:"date",name:"discountEndDate",id:"discountEndDate",required:!0})))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Cerrar"),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Enviar")),this.state.success&&r.a.createElement("span",{className:"text-success"},this.state.success),this.state.error&&r.a.createElement("span",{className:"text-danger"},this.state.error))))))))}}]),a}(n.Component)),J=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).submitHandler=e.submitHandler.bind(Object(m.a)(e)),e}return Object(d.a)(a,[{key:"submitHandler",value:function(e){e.preventDefault(),console.log("hola")}},{key:"childFormat",value:function(e){var t="";return e.saleProducts.forEach((function(e){t+='\n            <div class=\'form-row align-items-center\'>\n                    <div class="col-1">\n                        <label for="productId">Product ID</label>\n                        <input class="form-control" id="productId" value="'.concat(e.productId,'" disabled/>\n                    </div>\n                    <div class="col-4">\n                        <label for="productName">Name</label>\n                        <input class="form-control" id="productName" value="').concat(e.product[0].name,'" disabled/>\n                    </div>\n                    <div class="col-1">\n                        <label for="productPrice">Price</label>\n                        <input class="form-control" id="productPrice" value="$').concat(e.price,'" disabled/>\n                    </div>\n                    <div class="col-1">\n                        <label for="discount">Discount</label>\n                        <input class="form-control" id="discount" value="').concat(e.discount,'%" disabled/>\n                    </div>\n                    <div class="col-1">\n                        <label for="productQuantity">Quantity</label>\n                        <input class="form-control" id="productQuantity" value="').concat(e.quantity,'" disabled/>\n                    </div>\n                    <div class="col-2">\n                        <label for="dolarValue">Dolar value</label>\n                        <input class="form-control" id="dolarValue" value="').concat(Intl.NumberFormat("es-VE",{style:"currency",currency:"VES"}).format(e.dolarReference),'" disabled/>\n                    </div>\n            </div>\n            ')})),t+=""}},{key:"render",value:function(){return r.a.createElement("div",{className:""},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h1",{className:"text-danger float-left"},"Ventas"))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(P,{asyncTable:!0,childFormat:this.childFormat,sourceURL:"/api/sales",columns:[{title:"ID",data:"id"},{title:"Productos",className:"details-control",orderable:!1,data:null,defaultContent:'<button class="btn btn-success">Ver Productos</button>'},{render:function(e,t,a,n){return B.a.utc(a.createdAt).format("DD/MM/YYYY")},title:"Fecha creaci\xf3n",data:"sales.createdAt",type:"date"},{render:function(e,t,a,n){return B.a.utc(a.updatedAt).format("DD/MM/YYYY")},title:"Fecha actualizaci\xf3n",data:"sales.updatedAt",type:"date"}],actions:["edit","delete","date-range"]}))))}}]),a}(n.Component),Q=(a(16),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={name:null,rif:null,success:null,error:null},e.submitHandler=e.submitHandler.bind(Object(m.a)(e)),e.inputChangeHandler=e.inputChangeHandler.bind(Object(m.a)(e)),e.setModalAction=e.setModalAction.bind(Object(m.a)(e)),e}return Object(d.a)(a,[{key:"setModalAction",value:function(e){this.setState({modalAction:e})}},{key:"submitHandler",value:function(e){var t=this;e.preventDefault(),this.state.name&&this.state.rif&&fetch("/api/suppliers",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"application/json"},body:JSON.stringify({name:this.state.name,rif:this.state.rif})}).then((function(e){200==e.status?(t.setState({success:"Se ha registrado de forma exitosa."}),U()("#resourceTable").DataTable().draw()):e.text().then((function(e){t.setState({error:e})}))}))}},{key:"inputChangeHandler",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return r.a.createElement("div",{className:""},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h1",{className:"text-danger float-left"},"Proveedores"))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(P,{asyncTable:!0,setModalAction:this.setModalAction,sourceURL:"/api/suppliers",columns:[{title:"ID",data:"id"},{title:"Nombre",data:"name"},{title:"RIF",data:"rif"},{render:function(e,t,a,n){return B.a.utc(a.createdAt).format("DD/MM/YYYY")},title:"Fecha creaci\xf3n",data:"createdAt",type:"date"},{render:function(e,t,a,n){return B.a.utc(a.updatedAt).format("DD/MM/YYYY")},title:"Fecha actualizaci\xf3n",data:"updatedAt",type:"date"}],actions:["add","edit","delete"],modalStructure:r.a.createElement("form",{onSubmit:this.submitHandler,className:"float-left"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"New Supplier"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Supplier Name: "),r.a.createElement("input",{onChange:this.inputChangeHandler,className:"form-control",type:"text",name:"name",id:"name",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"rif"},"RIF: "),r.a.createElement("input",{onChange:this.inputChangeHandler,className:"form-control",type:"text",name:"rif",id:"rif",required:!0}))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Cerrar"),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Enviar")),this.state.success&&r.a.createElement("span",{className:"text-success"},this.state.success),this.state.error&&r.a.createElement("span",{className:"text-danger"},this.state.error))}))))}}]),a}(n.Component)),K=(a(16),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={supplier:null,product:null,price:null,quantity:null,success:null,error:null},e.submitHandler=e.submitHandler.bind(Object(m.a)(e)),e.supplierChangeHandler=e.supplierChangeHandler.bind(Object(m.a)(e)),e.productChangeHandler=e.productChangeHandler.bind(Object(m.a)(e)),e.inputChangeHandler=e.inputChangeHandler.bind(Object(m.a)(e)),e.setModalAction=e.setModalAction.bind(Object(m.a)(e)),e.supplierSelect=r.a.createRef(),e.productSelect=r.a.createRef(),e.supplyingForm=r.a.createRef(),e}return Object(d.a)(a,[{key:"setModalAction",value:function(e){this.setState({modalAction:e})}},{key:"supplierChangeHandler",value:function(e){this.setState({supplier:e})}},{key:"productChangeHandler",value:function(e){this.setState({product:e})}},{key:"inputChangeHandler",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"submitHandler",value:function(e){var t=this;e.preventDefault(),this.state.supplier&&this.state.product&&this.state.price&&this.state.quantity?fetch("/api/supplyings",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"application/json"},body:JSON.stringify({supplierId:this.state.supplier.id,productId:this.state.product.id,price:this.state.price,quantity:this.state.quantity,dolarReference:this.props.dolarReference})}).then((function(e){200==e.status?(t.setState({success:"Se ha registrado el abastecimiento con \xe9xito"}),t.supplyingForm.current.reset(),U()("#resourceTable").DataTable().draw()):e.text().then((function(e){t.setState({error:e})}))})):alert("Por favor rellene todos los campos")}},{key:"render",value:function(){return r.a.createElement("div",{className:""},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h1",{className:"text-danger float-left"},"Abastecimiento"))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(P,{asyncTable:!0,setModalAction:this.setModalAction,sourceURL:"/api/supplyings",columns:[{title:"ID",data:"id"},{title:"ID Proveedor",data:"supplierId"},{title:"Nombre Proveedor",data:"supplier.name"},{title:"ID Product",data:"productId"},{title:"Nombre Producto",data:"product.name"},{render:function(e){return"$"+e},title:"Precio de Compra",data:"price"},{render:function(e){return e>1?e+" Unidades":e+" Unidad"},title:"Cantidad",data:"quantity"},{render:function(e,t,a,n){return B.a.utc(a.createdAt).format("DD/MM/YYYY")},title:"Fecha creaci\xf3n",data:"createdAt",type:"date"},{render:function(e,t,a,n){return B.a.utc(a.updatedAt).format("DD/MM/YYYY")},title:"Fecha actualizaci\xf3n",data:"updatedAt",type:"date"}],actions:["add","edit","delete"],modalStructure:r.a.createElement("form",{ref:this.supplyingForm,onSubmit:this.submitHandler,className:"float-left"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"New Supplying"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"supplierId"},"Supplier ID: "),r.a.createElement($,{sourceURL:"/api/suppliers",isMulti:!1,innerRef:this.supplierSelect,changeHandler:this.supplierChangeHandler,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"productId"},"Product ID: "),r.a.createElement($,{isMulti:!1,innerRef:this.productSelect,changeHandler:this.productChangeHandler,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"price"},"Price: "),r.a.createElement("input",{onChange:this.inputChangeHandler,className:"form-control",type:"number",step:"0.00000000000000001",name:"price",id:"price",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"quantity"},"Quantity: "),r.a.createElement("input",{onChange:this.inputChangeHandler,className:"form-control",type:"number",step:"0.1",name:"quantity",id:"quantity",required:!0}))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Cerrar"),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Enviar")),this.state.success&&r.a.createElement("span",{className:"text-success"},this.state.success),this.state.error&&r.a.createElement("span",{className:"text-danger"},this.state.error))}))))}}]),a}(n.Component)),Z=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={email:null,password:null,permissions:null,success:null,error:null},e.submitHandler=e.submitHandler.bind(Object(m.a)(e)),e.inputChangeHandler=e.inputChangeHandler.bind(Object(m.a)(e)),e.form=r.a.createRef(),e}return Object(d.a)(a,[{key:"submitHandler",value:function(e){var t=this;e.preventDefault(),this.state.email&&this.state.password&&this.state.permissions&&fetch("/api/users",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"application/json"},body:JSON.stringify({email:this.state.email,password:this.state.password,permissions:this.state.permissions})}).then((function(e){200==e.status?(t.setState({success:"Se ha registrado con \xe9xito"}),t.form.current.reset(),U()("resourceTable").DataTable().draw()):e.text().then((function(e){t.setState({error:e})}))}))}},{key:"inputChangeHandler",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return r.a.createElement("div",{className:""},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h1",{className:"text-danger float-left"},"Usuarios"))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(P,{asyncTable:!0,sourceURL:"/api/users",columns:[{title:"ID",data:"id"},{title:"Email",data:"email"},{title:"Permisos",data:"permissions"},{render:function(e,t,a,n){return B.a.utc(a.createdAt).format("DD/MM/YYYY")},title:"Fecha creaci\xf3n",data:"createdAt",type:"date"},{render:function(e,t,a,n){return B.a.utc(a.updatedAt).format("DD/MM/YYYY")},title:"Fecha actualizaci\xf3n",data:"updatedAt",type:"date"}],actions:["add","delete"],modalStructure:r.a.createElement("form",{ref:this.form,onSubmit:this.submitHandler,className:"float-left"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"New Supplier"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email: "),r.a.createElement("input",{onChange:this.inputChangeHandler,className:"form-control",type:"text",name:"email",id:"email",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password: "),r.a.createElement("input",{onChange:this.inputChangeHandler,className:"form-control",type:"password",name:"password",id:"password",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"permissions"},"Permissions: "),r.a.createElement("input",{onChange:this.inputChangeHandler,className:"form-control",type:"text",name:"permissions",id:"permissions",required:!0}))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Cerrar"),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Enviar")),this.state.success&&r.a.createElement("span",{className:"text-success"},this.state.success),this.state.error&&r.a.createElement("span",{className:"text-danger"},this.state.error))}))))}}]),a}(n.Component),X=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).clickHandler=e.clickHandler.bind(Object(m.a)(e)),e.logout=e.logout.bind(Object(m.a)(e)),e}return Object(d.a)(a,[{key:"logout",value:function(){localStorage.removeItem("jwt")}},{key:"clickHandler",value:function(e){this.setState({activeNavLink:e.target.innerText})}},{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark flex-lg-column flex-xl-row"},r.a.createElement("a",{className:"navbar-brand text-danger",href:"/"},"Supermercado Melquisedec"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse row p-0 m-0",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav flex-lg-row mx-auto container-fluid p-0 m-0"},r.a.createElement("li",{className:"nav-item","data-toggle":"collapse","data-target":"#navbarSupportedContent"},r.a.createElement(l.b,{className:"nav-link",onClick:this.clickHandler,to:"/control-de-ventas"},r.a.createElement("span",{className:"d-md-inline"},"Control de Ventas"))),r.a.createElement("li",{className:"nav-item","data-toggle":"collapse","data-target":"#navbarSupportedContent"},r.a.createElement(l.b,{className:"nav-link",onClick:this.clickHandler,to:"/inventario"},r.a.createElement("span",{className:"d-md-inline"},"Inventario"))),r.a.createElement("li",{className:"nav-item","data-toggle":"collapse","data-target":"#navbarSupportedContent"},r.a.createElement(l.b,{className:"nav-link",onClick:this.clickHandler,to:"/reportes"},r.a.createElement("span",{className:"d-md-inline"},"Reportes"))),r.a.createElement("li",{className:"nav-item","data-toggle":"collapse","data-target":"#navbarSupportedContent"},r.a.createElement(l.b,{className:"nav-link",onClick:this.clickHandler,to:"/categorias"},r.a.createElement("span",{className:"d-md-inline"},"Categor\xedas"))),r.a.createElement("li",{className:"nav-item","data-toggle":"collapse","data-target":"#navbarSupportedContent"},r.a.createElement(l.b,{className:"nav-link",onClick:this.clickHandler,to:"/clientes"},r.a.createElement("span",{className:"d-md-inline"},"Clientes"))),r.a.createElement("li",{className:"nav-item","data-toggle":"collapse","data-target":"#navbarSupportedContent"},r.a.createElement(l.b,{className:"nav-link",onClick:this.clickHandler,to:"/productos"},r.a.createElement("span",{className:"d-md-inline"},"Productos"))),r.a.createElement("li",{className:"nav-item","data-toggle":"collapse","data-target":"#navbarSupportedContent"},r.a.createElement(l.b,{className:"nav-link",onClick:this.clickHandler,to:"/ventas"},r.a.createElement("span",{className:"d-md-inline"},"Ventas"))),r.a.createElement("li",{className:"nav-item","data-toggle":"collapse","data-target":"#navbarSupportedContent"},r.a.createElement(l.b,{className:"nav-link",onClick:this.clickHandler,to:"/abastecimiento"},r.a.createElement("span",{className:"d-md-inline"},"Abastecimiento"))),r.a.createElement("li",{className:"nav-item","data-toggle":"collapse","data-target":"#navbarSupportedContent"},r.a.createElement(l.b,{className:"nav-link",onClick:this.clickHandler,to:"/proveedores"},r.a.createElement("span",{className:"d-md-inline"},"Proveedores"))),r.a.createElement("li",{className:"nav-item","data-toggle":"collapse","data-target":"#navbarSupportedContent"},r.a.createElement(l.b,{className:"nav-link",onClick:this.clickHandler,to:"/usuarios"},r.a.createElement("span",{className:"d-md-inline"},"Usuarios"))),r.a.createElement("li",{className:"nav-item","data-toggle":"collapse","data-target":"#navbarSupportedContent"},r.a.createElement(l.b,{className:"nav-link btn btn-danger px-0",onClick:this.logout,to:"/signin"},"Cerrar Sesi\xf3n")))))}}]),a}(n.Component),ee=a(11),te=a(38),ae=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={selectedProduct:null,addedProducts:[],subtotalDollars:null,subtotalBs:null,totalDollars:null,totalBs:null,quantity:1,stockError:"",error:"",success:""},e.productsHandler=e.productsHandler.bind(Object(m.a)(e)),e.submitHandler=e.submitHandler.bind(Object(m.a)(e)),e.optionChangeHandler=e.optionChangeHandler.bind(Object(m.a)(e)),e.onChangeHandler=e.onChangeHandler.bind(Object(m.a)(e)),e.clickHandler=e.clickHandler.bind(Object(m.a)(e)),e.sendSaleForm=r.a.createRef(),e.quantityInput=r.a.createRef(),e.CustomSelectRef=r.a.createRef(),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;document.body.addEventListener("keyup",(function(t){var a=t.key;t.ctrlKey&&"Enter"==a&&e.submitHandler()}))}},{key:"optionChangeHandler",value:function(e,t){"select-option"==t.action&&(this.quantityInput.current.focus(),this.quantityInput.current.select()),this.setState({selectedProduct:e})}},{key:"onChangeHandler",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"productsHandler",value:function(e){var t=this;e.preventDefault(),null!=this.state.selectedProduct?fetch("/api/inventory/".concat(this.state.selectedProduct.id),{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){var a=e.data[0].stock;if(a>0&&a>=t.state.quantity){var n,c=t.state.selectedProduct,s=0;c.discount.length&&(s=c.discount[0].percent),c.discount=s,c.quantity=t.state.quantity||1,c.totalDollars=c.price*c.quantity-c.price*(s/100),c.priceBs=t.roundToNiceNumber(c.price*t.props.dolarReference),c.totalBs=t.roundToNiceNumber(c.priceBs*c.quantity-c.priceBs*(s/100)),s?(c.totalFormattedDollars=r.a.createElement("span",{className:s?"text-danger":""},Intl.NumberFormat("es-VE",{style:"currency",currency:"USD"}).format(c.totalDollars)+" (-".concat(s,"%)")),c.totalFormattedBs=r.a.createElement("span",{className:s?"text-danger":""},Intl.NumberFormat("es-VE",{style:"currency",currency:"VES"}).format(c.totalBs)+" (-".concat(s,"%)"))):(c.totalFormattedDollars=Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(c.totalDollars),c.totalFormattedBs=Intl.NumberFormat("es-VE",{style:"currency",currency:"VES"}).format(c.totalBs)),n={id:c.id,name:c.name,price:c.price,priceBs:c.priceBs,quantity:c.quantity,totalDollars:c.totalDollars,totalBs:c.totalBs,imagePath:c.imagePath,totalFormattedDollars:c.totalFormattedDollars,totalFormattedBs:c.totalFormattedBs,discount:c.discount},t.CustomSelectRef.current.select.state.value=[],t.quantityInput.current.value=1,t.CustomSelectRef.current.focus();var l=!1;if(t.state.addedProducts.forEach((function(e){n.id==e.id&&(l=!0,e.quantity+=n.quantity)})),l){var o=t.state.addedProducts.findIndex((function(e){return e.id===n.id}));t.setState({addedProducts:[].concat(Object(te.a)(t.state.addedProducts.slice(0,o)),[Object.assign({},t.state.addedProducts[o],Object(ee.a)({},n))],Object(te.a)(t.state.addedProducts.slice(o+1))),quantity:1,selectedProduct:null,stockError:""},(function(){var e=0,t=0;this.state.addedProducts.map((function(a){e+=parseFloat(a.totalDollars),t+=parseFloat(a.totalBs)})),this.setState({subtotalDollars:e,subtotalBs:t,totalDollars:e,totalBs:t})}))}else t.setState({quantity:1,addedProducts:t.state.addedProducts.concat(n),selectedProduct:null,stockError:""},(function(){var e=0,t=0;this.state.addedProducts.map((function(a){e+=parseFloat(a.totalDollars),t+=parseFloat(a.totalBs)})),this.setState({subtotalDollars:e,subtotalBs:t,totalDollars:e,totalBs:t})}))}else t.setState({stockError:"No hay productos suficientes en el inventario"})})):this.setState({stockError:"Seleccione un producto"})}},{key:"clickHandler",value:function(e){var t=[],a=0,n=0;this.state.addedProducts.forEach((function(r){r.id!=e.currentTarget.parentElement.parentElement.getAttribute("productid")?t.push(r):(a+=r.totalDollars,n+=r.totalBs)})),this.setState({addedProducts:t,subtotalDollars:this.state.subtotalDollars-a,subtotalBs:this.state.subtotalBs-n,totalDollars:this.state.totalDollars-a,totalBs:this.state.totalBs-n}),this.CustomSelectRef.current.focus()}},{key:"submitHandler",value:function(){var e=this;if(this.state.addedProducts.length){var t=[];this.state.addedProducts.forEach((function(a){t.push({id:a.id,quantity:a.quantity,price:a.price,dolarReference:e.props.dolarReference,discount:a.discount})})),fetch("/api/sales",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"application/json"},body:JSON.stringify({products:t})}).then((function(e){return e.json()})).then((function(t){t.err?e.setState({error:t.err}):(e.setState({success:"La venta se ha realizado con \xe9xito",subtotalDollars:0,subtotalBs:0,totalDollars:0,totalBs:0,addedProducts:[]}),setTimeout((function(){e.setState({success:""})}),3e3),e.CustomSelectRef.current.select.state.value=[],e.quantityInput.current.value=1,e.CustomSelectRef.current.focus())}))}else this.setState({stockError:"Seleccione un producto"})}},{key:"roundToNiceNumber",value:function(e){var t=0;return 4==e.toString().length?t=100*Math.ceil(e/100):e.toString().length>4&&(t=1e3*Math.ceil(e/1e3)),t}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container-fluid",id:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h1",{className:"text-danger"},"Control de Ventas"))),r.a.createElement("form",{className:"mt-5",onSubmit:this.productsHandler},r.a.createElement("div",{className:"col"},r.a.createElement("span",{className:"text-danger"},this.state.stockError)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-7 mt-2"},r.a.createElement($,{dolarReference:this.props.dolarReference,isMulti:!1,innerRef:this.CustomSelectRef,changeHandler:this.optionChangeHandler,name:"ProductSelect"})),r.a.createElement("div",{className:"col-12 col-md-3 mt-2"},r.a.createElement("input",{onChange:this.onChangeHandler,ref:this.quantityInput,type:"text",className:"form-control",placeholder:"Cantidad",id:"quantity",name:"quantity",defaultValue:"1"})),r.a.createElement("div",{className:"col-12 col-md-10 col-lg-2 mt-2"},r.a.createElement("input",{type:"submit",className:"form-control btn btn-primary",hidden:!0})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"table-responsive w-100",style:{height:"400px"}},r.a.createElement("table",{className:"table table-striped table-dark overflow-auto"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Count"),r.a.createElement("th",{scope:"col"},"Product ID"),r.a.createElement("th",{scope:"col"},"Nombre"),r.a.createElement("th",{scope:"col"},"Precio $"),r.a.createElement("th",{scope:"col"},"Precio Bs"),r.a.createElement("th",{scope:"col"},"Cantidad"),r.a.createElement("th",{scope:"col"},"Total $"),r.a.createElement("th",{scope:"col"},"Total Bs"))),r.a.createElement("tbody",null,this.state.addedProducts.map((function(t,a){return r.a.createElement("tr",{key:a,productid:t.id},r.a.createElement("th",null,a+1),r.a.createElement("th",null,t.id),r.a.createElement("th",null,r.a.createElement("img",{className:"float-left mr-2",style:{maxWidth:"20px"},src:t.imagePath}),t.name),r.a.createElement("th",null,Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t.price)),r.a.createElement("th",null,Intl.NumberFormat("es-VE",{style:"currency",currency:"VES"}).format(t.priceBs)),r.a.createElement("th",null,t.quantity),r.a.createElement("th",null,t.totalFormattedDollars),r.a.createElement("th",null,t.totalFormattedBs),r.a.createElement("th",null,r.a.createElement("button",{onClick:e.clickHandler,className:"btn btn-danger"},"Delete")))}))))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"d-flex flex-column align-items-end"},r.a.createElement("label",{className:"font-weight-bold h4"},"Subtotal Bs: ",r.a.createElement("span",{className:"font-weight-bold h4 text-danger"},Intl.NumberFormat("es-VE",{style:"currency",currency:"VES"}).format(this.state.subtotalBs))),r.a.createElement("label",{className:"font-weight-bold h4"},"Total Bs: ",r.a.createElement("span",{className:"font-weight-bold h4 text-danger"},Intl.NumberFormat("es-VE",{style:"currency",currency:"VES"}).format(this.state.totalBs))),r.a.createElement("hr",{className:"w-100"}),r.a.createElement("label",{className:"font-weight-bold h4"},"Subtotal $: ",r.a.createElement("span",{className:"font-weight-bold h4 text-danger"},Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(this.state.subtotalDollars))),r.a.createElement("label",{className:"font-weight-bold h4"},"Total $: ",r.a.createElement("span",{className:"font-weight-bold h4 text-danger"},Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(this.state.totalDollars)))))),r.a.createElement("input",{onClick:this.submitHandler,type:"submit",className:"form-control btn btn-primary mt-2",value:"Enviar"}),r.a.createElement("div",{className:"mt-2"},r.a.createElement("span",{className:"text-danger h3"},this.state.error),r.a.createElement("span",{className:"text-success h3"},this.state.success)))}}]),a}(n.Component),ne=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:""},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h1",{className:"text-danger float-left"},"Ventas"))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(P,{asyncTable:!0,sourceURL:"/api/inventory",columns:[{title:"Product ID",data:"id"},{title:"Nombre Producto",data:"name"},{title:"Inventario",data:"stock",render:function(e,t,a){return e<=0?'<span class="text-danger">'.concat(e,"</span>"):'<span class="text-success">'.concat(e,"</span>")}},{title:"Total productos vendidos",data:"salesTotal"},{title:"Total productos comprados",data:"supplyingsTotal"}],actions:[]}))))}}]),a}(n.Component),re=a(9),ce=a(7),se=(a(16),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={resource:"sales",parameters:""},e.submitHandler=e.submitHandler.bind(Object(m.a)(e)),e.changeHandler=e.changeHandler.bind(Object(m.a)(e)),e.reportForm=r.a.createRef(),e.resourceTable=r.a.createRef(),e}return Object(d.a)(a,[{key:"changeHandler",value:function(e){var t=document.body.querySelector("#rangeDateFrom").value,a=document.body.querySelector("#rangeDateTo").value,n=document.body.querySelector("#greaterThanDate").value,r=document.body.querySelector("#lowerThanDate").value,c=document.body.querySelector("#equalDate").value,s=this.state.parameters,l="";if("dateRadios"==e.target.name){switch(ce("form").find("input[type=date]").val(""),e.target.id){case"today":l="from=".concat(re(new Date).format("YYYY-MM-DD"),"&to=").concat(re(new Date).format("YYYY-MM-DD"));break;case"yesterday":l="from=".concat(re(new Date).subtract(1,"days").format("YYYY-MM-DD"),"&to=").concat(re(new Date).subtract(1,"days").format("YYYY-MM-DD"));break;case"lastWeek":l="from=".concat(re(new Date).subtract(7,"days").format("YYYY-MM-DD"),"&to=").concat(re(new Date).format("YYYY-MM-DD"));break;case"fortnight":l="from=".concat(re(new Date).subtract(15,"days").format("YYYY-MM-DD"),"&to=").concat(re(new Date).format("YYYY-MM-DD"));break;case"month":l="from=".concat(re(new Date).subtract(1,"months").format("YYYY-MM-DD"),"&to=").concat(re(new Date).format("YYYY-MM-DD"));break;case"quarter":l="from=".concat(re(new Date).subtract(3,"months").format("YYYY-MM-DD"),"&to=").concat(re(new Date).format("YYYY-MM-DD"));break;case"semester":l="from=".concat(re(new Date).subtract(6,"months").format("YYYY-MM-DD"),"&to=").concat(re(new Date).format("YYYY-MM-DD"))}l+="&group=true"}else{if("reportType"==e.target.name)return void this.setState({resource:e.target.id,parameters:""},(function(){this.setState({parameters:s})}));switch(ce("form").find("input[name=dateRadios]").prop("checked",!1),ce("form").find("input[type=date]").val(""),e.target.id){case"greaterThanDate":l="createdAt=".concat(n,"&operation=gte"),e.target.value=n;break;case"lowerThanDate":l="createdAt=".concat(r,"&operation=lte"),e.target.value=r;break;case"equalDate":l="createdAt=".concat(c,"&operation=eq"),e.target.value=c;break;case"rangeDateFrom":l=a?"from=".concat(re(t||"").format("YYYY-MM-DD"),"&to=").concat(a):"from=".concat(re(t||"").format("YYYY-MM-DD")),e.target.value=t,ce("#rangeDateTo").val(a);break;case"rangeDateTo":l=t?"from=".concat(t,"&to=").concat(re(a||"").format("YYYY-MM-DD")):"to=".concat(re(a||"").format("YYYY-MM-DD")),e.target.value=a,ce("#rangeDateFrom").val(t)}l+="&group=true"}this.setState({parameters:l})}},{key:"componentDidUpdate",value:function(){this.resourceTable.current&&this.resourceTable.current.changeSourceURL("/api/".concat(this.state.resource,"?").concat(this.state.parameters))}},{key:"submitHandler",value:function(e){e.preventDefault(),console.log(this.state.parameters),this.reportForm.current.reset()}},{key:"render",value:function(){var e=[{render:function(e,t,a,n){return'<img src="'.concat(a.product.imagePath,'" style="max-width:35px;"/>')},title:"Imagen",data:"product.imagePath"},{title:"Product ID",data:"product.id"},{title:"Nombre",data:"product.name"},{title:"Transacciones",data:"transactions"},{title:"Cantidad de productos",data:"salesTotal"},{render:function(e,t,a,n){return Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.grossTotalDollars)},title:"sales"==this.state.resource?"Ganancia bruta $":"Costo bruto $",data:"grossTotalDollars"},{render:function(e,t,a,n){return Intl.NumberFormat("es-VE",{style:"currency",currency:"VES"}).format(a.grossTotalBs)},title:"sales"==this.state.resource?"Ganancia bruta Bs":"Costo bruto Bs",data:"grossTotalBs"},{render:function(e,t,a,n){return Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.netIncomeDollars)},title:"sales"==this.state.resource?"Ganancia Neta $":"Ganancia neta $",data:"netIncomeDollars"},{render:function(e,t,a,n){return Intl.NumberFormat("es-VE",{style:"currency",currency:"VES"}).format(a.netIncomeBs)},title:(this.state.resource,"Ganancia Neta Bs"),data:"netIncomeBs"}],t=[{render:function(e,t,a,n){return'<img src="'.concat(a.product.imagePath,'" style="max-width:35px;"/>')},title:"Imagen",data:"product.imagePath"},{title:"Product ID",data:"product.id"},{title:"Nombre",data:"product.name"},{title:"Transacciones",data:"transactions"},{title:"Cantidad de productos",data:"quantity"},{render:function(e,t,a,n){return Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.grossTotalDollars)},title:"sales"==this.state.resource?"Ganancia bruta $":"Costo bruto $",data:"grossTotalDollars"},{render:function(e,t,a,n){return Intl.NumberFormat("es-VE",{style:"currency",currency:"VES"}).format(a.grossTotalBs)},title:"sales"==this.state.resource?"Ganancia bruta Bs":"Costo bruto Bs",data:"grossTotalBs"}];return r.a.createElement("div",{className:""},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h1",{className:"text-danger float-left"},"Reportes"))),r.a.createElement("hr",null),r.a.createElement("form",{ref:this.reportForm,onSubmit:this.submitHandler},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("h3",{className:"mr-4"},"Tipo de reporte:")),r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("input",{onChange:this.changeHandler,className:"form-check-input",type:"radio",name:"reportType",id:"supplyings",value:"supplyingRadio"}),r.a.createElement("label",{className:"form-check-label",htmlFor:"supplyingRadio"},"Compra")),r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("input",{onChange:this.changeHandler,className:"form-check-input",type:"radio",name:"reportType",id:"sales",value:"saleRadio",defaultChecked:!0}),r.a.createElement("label",{className:"form-check-label",htmlFor:"saleRadio"},"Venta"))),r.a.createElement("hr",{className:"col-12 p-0"}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-lg-2"},r.a.createElement("h5",{className:"mr-4"},"Rango de fechas:"),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:this.changeHandler,type:"date",name:"rangeDateFrom",id:"rangeDateFrom"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:this.changeHandler,type:"date",name:"rangeDateTo",id:"rangeDateTo"}))),r.a.createElement("div",{className:"col-12 col-lg-4"},r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("label",{className:"btn btn-secondary",htmlFor:"semester",name:"labelDateRadios"},r.a.createElement("input",{onChange:this.changeHandler,className:"form-check-input",type:"radio",name:"dateRadios",id:"semester"}),"6 meses")),r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("label",{className:"btn btn-secondary",htmlFor:"quarter",name:"labelDateRadios"},r.a.createElement("input",{onChange:this.changeHandler,className:"form-check-input",type:"radio",name:"dateRadios",id:"quarter"}),"3 meses")),r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("label",{className:"btn btn-secondary",htmlFor:"month",name:"labelDateRadios"},r.a.createElement("input",{onChange:this.changeHandler,className:"form-check-input",type:"radio",name:"dateRadios",id:"month"}),"1 mes")),r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("label",{className:"btn btn-secondary",htmlFor:"fortnight",name:"labelDateRadios"},r.a.createElement("input",{onChange:this.changeHandler,className:"form-check-input",type:"radio",name:"dateRadios",id:"fortnight"}),"15 d\xedas")),r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("label",{className:"btn btn-secondary",htmlFor:"lastWeek",name:"labelDateRadios"},r.a.createElement("input",{onChange:this.changeHandler,className:"form-check-input",type:"radio",name:"dateRadios",id:"lastWeek"}),"\xdatima semana")),r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("label",{className:"btn btn-secondary",htmlFor:"yesterday",name:"labelDateRadios"},r.a.createElement("input",{onChange:this.changeHandler,className:"form-check-input",type:"radio",name:"dateRadios",id:"yesterday"}),"Ayer")),r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("label",{className:"btn btn-secondary",htmlFor:"today",name:"labelDateRadios"},r.a.createElement("input",{onChange:this.changeHandler,className:"form-check-input",type:"radio",name:"dateRadios",id:"today"}),"Hoy"))),r.a.createElement("div",{className:"col-12 col-lg-2"},r.a.createElement("div",{className:""},r.a.createElement("h5",{className:""},"Fecha mayor o igual a:"),r.a.createElement("input",{onChange:this.changeHandler,type:"date",name:"greaterThanDate",id:"greaterThanDate"}))),r.a.createElement("div",{className:"col-12 col-lg-2"},r.a.createElement("div",{className:""},r.a.createElement("h5",{className:""},"Fecha menor o igual a:"),r.a.createElement("input",{onChange:this.changeHandler,type:"date",name:"lowerThanDate",id:"lowerThanDate"}))),r.a.createElement("div",{className:"col-12 col-lg-2"},r.a.createElement("div",{className:""},r.a.createElement("h5",{className:""},"Fecha igual a:"),r.a.createElement("input",{onChange:this.changeHandler,type:"date",name:"equalDate",id:"equalDate"})))),r.a.createElement("hr",null)),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-md-12"},""!=this.state.parameters&&r.a.createElement(P,{ref:this.resourceTable,asyncTable:!0,sourceURL:"/api/".concat(this.state.resource,"?").concat(this.state.parameters),columns:"sales"==this.state.resource?e:t,actions:[],dolarReference:this.props.dolarReference}))))}}]),a}(n.Component)),le=a(53),oe=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={loading:!0,isAuthenticated:!1},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;T().then((function(t){e.setState({loading:!1,isAuthenticated:t})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.component,n=Object(le.a)(t,["component"]);return r.a.createElement(o.b,{render:function(t){return e.state.isAuthenticated?r.a.createElement(a,Object.assign({},t,n)):e.state.loading?r.a.createElement("div",null,"LOADING"):r.a.createElement(o.a,{to:{pathname:"/signin",state:{from:e.props.location}}})}})}}]),a}(r.a.Component),ie=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={formattedDolareReference:"",dolarReference:0,loading:!1},e.fetchDolarReference=e.fetchDolarReference.bind(Object(m.a)(e)),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.fetchDolarReference()}},{key:"fetchDolarReference",value:function(){var e=this;this.setState({loading:!0}),fetch("/api/dolarReference",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(t){t.data?e.setState({dolarReference:t.data.price,formattedDolareReference:Intl.NumberFormat("es-VE",{style:"currency",currency:"VES"}).format(t.data.price),loading:!1}):e.setState({dolarReference:0,formattedDolareReference:Intl.NumberFormat("es-VE",{style:"currency",currency:"VES"}).format(0),loading:!1})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row sticky-top"},r.a.createElement("div",{className:"col-md-12 p-0"},r.a.createElement(X,null))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"bg-danger text-light col-12"},"Precio del Dolar ",r.a.createElement("span",{id:"dolarReference",className:"badge badge-light"},this.state.loading?"Loading...":this.state.formattedDolareReference))),r.a.createElement("main",{className:"mt-5"},r.a.createElement(o.b,{path:"/control-de-ventas",render:function(t){return r.a.createElement(ae,Object.assign({},t,{dolarReference:e.state.dolarReference}))}}),r.a.createElement(o.b,{path:"/inventario",component:ne}),r.a.createElement(o.b,{path:"/reportes",render:function(t){return r.a.createElement(se,Object.assign({},t,{dolarReference:e.state.dolarReference}))}}),r.a.createElement(o.b,{path:"/categorias",component:L}),r.a.createElement(o.b,{path:"/clientes",component:G}),r.a.createElement(o.b,{path:"/productos",render:function(t){return r.a.createElement(W,Object.assign({},t,{dolarReference:e.state.dolarReference}))}}),r.a.createElement(o.b,{path:"/ventas",component:J}),r.a.createElement(o.b,{path:"/abastecimiento",render:function(t){return r.a.createElement(K,Object.assign({},t,{dolarReference:e.state.dolarReference}))}}),r.a.createElement(o.b,{path:"/proveedores",component:Q}),r.a.createElement(o.b,{path:"/usuarios",component:Z})))}}]),a}(n.Component),de=a(25),me={data:[],next:{},previous:{},loading:!1};var ue={activeCategoryId:0,activeCategoryName:"",data:[]};var pe={products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_PRODUCTS":return Object(ee.a)(Object(ee.a)({},e),{},{data:t.paginatedProducts.data,next:t.paginatedProducts.next,previous:t.paginatedProducts.previous});case"LOADING":return Object(ee.a)(Object(ee.a)({},e),{},{loading:t.loading});default:return e}},categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_CATEGORIES":return Object(ee.a)(Object(ee.a)({},e),{},{data:t.categories});case"SET_ACTIVE_CATEGORY_ID":return Object(ee.a)(Object(ee.a)({},e),{},{activeCategoryId:t.categoryId});case"SET_ACTIVE_CATEGORY_NAME":return Object(ee.a)(Object(ee.a)({},e),{},{activeCategoryName:t.categoryName});default:return e}}},he=Object(de.b)(Object(ee.a)({},pe));var fe=Object(de.c)(he);var be=function(){return r.a.createElement(y.a,{store:fe},r.a.createElement("div",{className:"App"},r.a.createElement(l.a,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/signin",component:M}),r.a.createElement(oe,{path:"/",component:ie})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[54,1,2]]]);
//# sourceMappingURL=main.430b3654.chunk.js.map